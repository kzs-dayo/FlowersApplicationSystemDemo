<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>注文一覧 - 供花注文管理システム</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="common.css">
    <link rel="stylesheet" href="sidebar.css">
    <link rel="stylesheet" href="header.css">
    <link rel="stylesheet" href="order-list.css">
</head>
<body>
    <div class="layout">
        <!-- サイドナビゲーション -->
        <div id="sidebar-container"></div>

        <!-- メインコンテンツ -->
        <main class="main-content">
            <!-- ヘッダー -->
            <div id="header-container"></div>

            <!-- コンテンツ -->
            <div class="content">
                <!-- 統計サマリー -->
                <div class="summary-cards">
                    <div class="summary-card">
                        <div class="summary-icon"><i class="fas fa-list"></i></div>
                        <div class="summary-content">
                            <div class="summary-value" id="totalOrders">0</div>
                            <div class="summary-label">全注文数</div>
                        </div>
                    </div>
                    <div class="summary-card">
                        <div class="summary-icon"><i class="fas fa-check-circle"></i></div>
                        <div class="summary-content">
                            <div class="summary-value" id="activeOrders">0</div>
                            <div class="summary-label">有効注文</div>
                        </div>
                    </div>
                    <div class="summary-card">
                        <div class="summary-icon"><i class="fas fa-times-circle"></i></div>
                        <div class="summary-content">
                            <div class="summary-value" id="cancelledOrders">0</div>
                            <div class="summary-label">キャンセル</div>
                        </div>
                    </div>
                </div>

                <!-- フィルター・検索 -->
                <div class="filter-section">
                    <div class="filter-row">
                        <div class="filter-group">
                            <label>ステータス</label>
                            <select id="filterStatus" onchange="applyFilters()">
                                <option value="all">すべて</option>
                                <option value="active" selected>有効のみ</option>
                                <option value="cancelled">キャンセルのみ</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label>支払方法</label>
                            <select id="filterPayment" onchange="applyFilters()">
                                <option value="all">すべて</option>
                                <option value="振込">振込</option>
                                <option value="現地">現地</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label>検索（ご葬家名、依頼者名）</label>
                            <input type="text" id="searchInput" placeholder="検索キーワード" onkeyup="applyFilters()">
                        </div>
                    </div>
                </div>

                <!-- 注文一覧テーブル -->
                <div class="table-container">
                    <table class="orders-table" id="ordersTable">
                        <thead>
                            <tr>
                                <th onclick="sortTable('no')">No. <span class="sort-indicator">↕</span></th>
                                <th onclick="sortTable('funeral')">ご葬家名 <span class="sort-indicator">↕</span></th>
                                <th onclick="sortTable('deceased')">故人名 <span class="sort-indicator">↕</span></th>
                                <th onclick="sortTable('date')">受注日 <span class="sort-indicator">↕</span></th>
                                <th onclick="sortTable('nameplate')">芳名板 <span class="sort-indicator">↕</span></th>
                                <th onclick="sortTable('requester')">依頼者 <span class="sort-indicator">↕</span></th>
                                <th onclick="sortTable('contact')">連絡先 <span class="sort-indicator">↕</span></th>
                                <th onclick="sortTable('amount')">金額（税込） <span class="sort-indicator">↕</span></th>
                                <th onclick="sortTable('fee')">手数料（税込） <span class="sort-indicator">↕</span></th>
                                <th onclick="sortTable('total')">合計（税込） <span class="sort-indicator">↕</span></th>
                                <th onclick="sortTable('payment')">支払方法 <span class="sort-indicator">↕</span></th>
                                <th onclick="sortTable('flowerMode')">花代処理 <span class="sort-indicator">↕</span></th>
                                <th onclick="sortTable('status')">ステータス <span class="sort-indicator">↕</span></th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody id="ordersTableBody">
                            <!-- データはJavaScriptで動的に挿入 -->
                        </tbody>
                    </table>
                </div>

                <!-- ページネーション -->
                <div class="pagination">
                    <button class="btn-pagination" id="prevPage" onclick="changePage(-1)">
                        <i class="fas fa-chevron-left"></i> 前へ
                    </button>
                    <span class="page-info">
                        <span id="currentPage">1</span> / <span id="totalPages">1</span> ページ
                    </span>
                    <button class="btn-pagination" id="nextPage" onclick="changePage(1)">
                        次へ <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
            </div>
        </main>
    </div>

    <!-- ご葬家振り分けモーダル -->
    <div class="modal" id="assignmentModal">
        <div class="modal-overlay" onclick="closeModal('assignmentModal')"></div>
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2><i class="fas fa-sitemap"></i> ご葬家への振り分け</h2>
                <button class="modal-close" onclick="closeModal('assignmentModal')">×</button>
            </div>
            <div class="modal-body" id="assignmentModalBody">
                <!-- 振り分け内容はJavaScriptで動的に挿入 -->
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('assignmentModal')">キャンセル</button>
                <button class="btn btn-primary" onclick="saveAssignments()">
                    <i class="fas fa-save"></i> 保存
                </button>
            </div>
        </div>
    </div>

    <!-- 注文詳細モーダル -->
    <div class="modal" id="orderDetailModal">
        <div class="modal-overlay" onclick="closeModal('orderDetailModal')"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2>注文詳細</h2>
                <button class="modal-close" onclick="closeModal('orderDetailModal')">×</button>
            </div>
            <div class="modal-body" id="orderDetailContent">
                <!-- 詳細情報はJavaScriptで動的に挿入 -->
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('orderDetailModal')">閉じる</button>
            </div>
        </div>
    </div>

    <script src="sidebar.js"></script>
    <script src="header.js"></script>
    <script src="order-list.js"></script>
</body>
</html>

